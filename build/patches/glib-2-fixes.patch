This file is part of MXE. See LICENSE.md for licensing information.

Contains ad hoc patches for cross building.

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Kleis Auke Wolthuizen <github@kleisauke.nl>
Date: Fri, 24 Jun 2022 11:15:23 +0200
Subject: [PATCH 1/1] Ensure standalone intl support library can be found

See: https://gitlab.gnome.org/GNOME/glib/-/merge_requests/2109#note_1485662

Upstream-Status: Pending

diff --git a/meson.build b/meson.build
index 1111111..2222222 100644
--- a/meson.build
+++ b/meson.build
@@ -2110,11 +2110,11 @@ if libintl.found()
   #
   # Meson's builtin dependency lookup as of 0.60.0 doesn't check for
   # pthread, so we do this manually here.
-  if cc.has_function('ngettext', dependencies : libintl)
+  if cc.has_function('ngettext', prefix: '#include <libintl.h>', dependencies : libintl)
     libintl_deps += [libintl]
   else
     libintl_pthread = cc.find_library('pthread', required : false)
-    if libintl_pthread.found() and cc.has_function('ngettext', dependencies : [libintl, libintl_pthread])
+    if libintl_pthread.found() and cc.has_function('ngettext', prefix: '#include <libintl.h>', dependencies : [libintl, libintl_pthread])
       libintl_deps += [libintl, libintl_pthread]
     else
       libintl = disabler()
@@ -2123,7 +2123,7 @@ if libintl.found()
 endif
 
 if libintl.found()
-  have_bind_textdomain_codeset = cc.has_function('bind_textdomain_codeset', dependencies: libintl_deps)
+  have_bind_textdomain_codeset = cc.has_function('bind_textdomain_codeset', prefix: '#include <libintl.h>', dependencies: libintl_deps)
 else
   libintl = subproject('proxy-libintl').get_variable('intl_dep')
   libintl_deps = [libintl]
